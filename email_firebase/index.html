<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <title>emailJS TEST</title>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript">
    </script>

    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
     <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
     <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>
    
     <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
     <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-analytics.js"></script>
    
     <!-- Add Firebase products that you want to use -->
     <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-auth.js"></script>
     <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-firestore.js"></script>
</head>

<body>
<form>
<input type="text" name="eaddr" placeholder="이메일을 입력해주세요"><br>
<input type="button" name="subscribe" class="btn black" value="구독하기"/><br><br><br>
<textarea name="message" rows="5" placeholder="내용을 입력해주세요 "></textarea><br>
<input type="button" name="submit" class="btn white" value="메일보내기"/><br>
</form>
<script>
    var config = {apiKey: "AIzaSyCZpU0QYlfVGumceSqfMFkVu8qWgdhos0s",
    authDomain: "emailjstest-e001a.firebaseapp.com",
    projectId: "emailjstest-e001a",
    storageBucket: "emailjstest-e001a.appspot.com",
    messagingSenderId: "80123653326",
    appId: "1:80123653326:web:5dde7b9911f6db88adb49f"
};
firebase.initializeApp(config);
</script>

<!-- <script type = "text/javascript">

  // Initialize Firebase
    $(document).ready(function(){
        const admin = require('firebase-admin');
        admin.initializeApp({
  credential: admin.credential.applicationDefault()
});
const db = admin.firestore();


        $('input[name=subscribe]').click(function(){
            const docRef = db.collection('emailall').doc('test');
            docRef.push({
                "email_addr": $('input[name=eaddr]').val()
            });
        })
    })
</script> -->

<script type="text/javascript">
    var emailData=["ykoou3040@gmail.com", "ykoou@naver.com"];
	$(document).ready(function() {
		emailjs.init("user_Vpi1xabpgiRvGjZwJQSfx");		
        //"user_xxxxx"이 부분은 사용자마다 다르니 반드시 emailJS의 installation 화면을 확인
        $('input[name=submit]').click(function(){    
            for(var i=0; i<emailData.length; i++){

          var templateParams = {	
          //각 요소는 emailJS에서 설정한 템플릿과 동일한 명으로 작성!
                message : $('textarea[name=message]').val(),
                emails : emailData[i],
           				};
                    
                	
         emailjs.send('gmail', 'template_88t9lfm', templateParams)
         //emailjs.send('service ID', 'template ID', 보낼 내용이 담긴 객체)
         	    .then(function(response) {
         	       console.log('SUCCESS!', response.status, response.text);
         	    }, function(error) {
         	       console.log('FAILED...', error);
         	    });
            }
        });
        
	  });
    
	</script>

    
    <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
 <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
 <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>

 <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
 <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-analytics.js"></script>

 <!-- Add Firebase products that you want to use -->
 <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-auth.js"></script>
 <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-firestore.js"></script>

</body>

</html>